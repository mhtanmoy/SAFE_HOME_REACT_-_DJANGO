{"ast":null,"code":"import React,{useEffect}from'react';import{Row,Col,Button}from'react-bootstrap';import Apartment from'../components/Apartment';import Loader from'../components/Loader';import Message from'../components/Message';import{useDispatch,useSelector}from'react-redux';import{listApartments,createApartment}from'../actions/apartmentActions';import{APARTMENT_LIST_RESET,APARTMENT_CREATE_RESET}from'../constants/apartmentConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HomeScreen(_ref){var history=_ref.history;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var dispatch=useDispatch();var apartmentList=useSelector(function(state){return state.apartmentList;});var error=apartmentList.error,loading=apartmentList.loading,apartments=apartmentList.apartments;var apartmentDelete=useSelector(function(state){return state.apartmentDelete;});var loadingD=apartmentDelete.loading,errorD=apartmentDelete.error,success=apartmentDelete.success;var apartmentCreate=useSelector(function(state){return state.apartmentCreate;});var loadingC=apartmentCreate.loading,errorC=apartmentCreate.error,successC=apartmentCreate.success,apartmentC=apartmentCreate.apartment;useEffect(function(){if(success){dispatch({type:APARTMENT_LIST_RESET});dispatch(listApartments());}else{dispatch(listApartments());}if(successC){dispatch({type:APARTMENT_CREATE_RESET});history.push(\"/apartment/\".concat(apartmentC.id,\"/edit\"));}},[dispatch,history,successC,success]);var createApartmentHandler=function createApartmentHandler(){dispatch(createApartment());};return/*#__PURE__*/_jsxs(\"div\",{children:[userInfo&&userInfo.isAdmin&&/*#__PURE__*/_jsxs(Button,{className:\"my-3\",onClick:createApartmentHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Create Apartment\"]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Apartments\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"secondary\",children:error}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Row,{children:apartments.map(function(apartment){return/*#__PURE__*/_jsx(Col,{sm:12,md:6,lg:4,xl:3,children:/*#__PURE__*/_jsx(Apartment,{apartment:apartment,userInfo:userInfo})},apartment.id);})})})]});}export default HomeScreen;","map":{"version":3,"sources":["C:/Users/admin/Desktop/SAFE_HOME_REACT_DJANGO/frontend/src/screen/HomeScreen.js"],"names":["React","useEffect","Row","Col","Button","Apartment","Loader","Message","useDispatch","useSelector","listApartments","createApartment","APARTMENT_LIST_RESET","APARTMENT_CREATE_RESET","HomeScreen","history","userLogin","state","userInfo","dispatch","apartmentList","error","loading","apartments","apartmentDelete","loadingD","errorD","success","apartmentCreate","loadingC","errorC","successC","apartmentC","apartment","type","push","id","createApartmentHandler","isAdmin","map"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { Row, Col, Button } from 'react-bootstrap'\r\nimport Apartment from '../components/Apartment'\r\nimport Loader from '../components/Loader'\r\nimport Message from '../components/Message'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { listApartments, createApartment } from '../actions/apartmentActions'\r\nimport { APARTMENT_LIST_RESET, APARTMENT_CREATE_RESET } from '../constants/apartmentConstants'\r\n\r\n\r\nfunction HomeScreen({ history }) {\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const apartmentList = useSelector(state => state.apartmentList)\r\n    const { error, loading, apartments } = apartmentList\r\n\r\n    const apartmentDelete = useSelector(state => state.apartmentDelete)\r\n    const { loading: loadingD, error: errorD, success } = apartmentDelete\r\n\r\n    const apartmentCreate = useSelector(state => state.apartmentCreate)\r\n    const { loading: loadingC, error: errorC, success: successC, apartment: apartmentC } = apartmentCreate\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (success) {\r\n            dispatch({ type: APARTMENT_LIST_RESET })\r\n            dispatch(listApartments())\r\n        } else {\r\n            dispatch(listApartments())\r\n        }\r\n\r\n        if (successC) {\r\n            dispatch({ type: APARTMENT_CREATE_RESET })\r\n            history.push(`/apartment/${apartmentC.id}/edit`)\r\n        }\r\n\r\n    }, [dispatch, history, successC, success])\r\n\r\n    const createApartmentHandler = () => {\r\n        dispatch(createApartment())\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n\r\n            {userInfo && userInfo.isAdmin && (\r\n\r\n                <Button className='my-3' onClick={createApartmentHandler}>\r\n                    <i className='fas fa-plus'></i> Create Apartment\r\n                </Button>\r\n            )}\r\n            <h1>Apartments</h1>\r\n            {loading ? <Loader />\r\n                : error ? <Message variant='secondary'>{error}</Message>\r\n                    :\r\n                    <div>\r\n                        <Row>\r\n                            {apartments.map(apartment => (\r\n                                <Col key={apartment.id} sm={12} md={6} lg={4} xl={3}>\r\n                                    <Apartment apartment={apartment} userInfo={userInfo} />\r\n                                </Col>\r\n                            ))}\r\n                        </Row>\r\n                    </div>\r\n            }\r\n\r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default HomeScreen"]},"metadata":{},"sourceType":"module"}